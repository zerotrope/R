library(ggplot2)
library(readr)
install.packages("readr")
library(ggplot2)
library(readr)
raw <-
read_tsv("hospitalization.csv",
col_types = cols(id = 'c',
dur = 'd',
age = 'd',
sex = 'c',
temp = 'd',
wbc = 'd',
antib = 'c',
cult = 'c',
serv = 'c'))
h <- within(raw, {
sex <- factor(sex, levels = c('1', '2'), labels = c('m', 'f'))
antib <- factor(antib, levels = c('2', '1'), labels = c('no', 'yes'))
cult <- factor(cult, levels = c('2', '1'), labels = c('no', 'yes'))
serv <- factor(serv, levels = c('1', '2'), labels = c('medical', 'surgical'))
temp <- (temp - 32.0) * 5/9  ## convert to Celsius
})
h <- subset(h, select = -id)
library(ggplot2)
library(readr)
raw <-
read_tsv("hospitalization.csv",
col_types = cols(id = 'c',
dur = 'd',
age = 'd',
sex = 'c',
temp = 'd',
wbc = 'd',
antib = 'c',
cult = 'c',
serv = 'c'))
h <- within(raw, {
sex <- factor(sex, levels = c('1', '2'), labels = c('m', 'f'))
antib <- factor(antib, levels = c('2', '1'), labels = c('no', 'yes'))
cult <- factor(cult, levels = c('2', '1'), labels = c('no', 'yes'))
serv <- factor(serv, levels = c('1', '2'), labels = c('medical', 'surgical'))
temp <- (temp - 32.0) * 5/9  ## convert to Celsius
})
h <- subset(h, select = -id)
summary(h)
hist(h$dur)
Fn <- ecdf(h$dur)
summary(Fn)
plot(Fn)
hist(h$temp)
getwd()
setwd("~/ACADEMICS/DSTI/19 - Survival Analysis")
install.packages("survival")
install.packages("asaur")
install.packages("reshape")
install.packages("maxLik")
install.packages("glmnet")
table(h$dur == 0)
prop.table(table(h$dur == 0))
library(survival)
?pbc
table(pbc)
head(pbc)
head(pbc)
summary(pbc)
#head(pbc)
summary(pbc)
View(h)
?lung
table(lung)
table(lung$isnt)i
table(lung$isnt)
head(lung)
head(pbc)
head(pbc)
summary(pbc)
head(pbc)
summary(pbc)
hist(pbc$stage)
table(lung$status)
?pbc
head(pbc)
summary(pbc)
hist(pbc$stage)
table(pbc$stage)
d <- pbc
d$event <- 0 + (d$status == 2)
summary(d)
help(lm)
d <- pbc
d$event <- 0 + (d$status == 2)
summary(d)
table(d$event)
d <- pbc
d$event <- 0 + (d$status == 2)
summary(d)
table(d$status)
table(d$event)
?pbc
d$sex <- factor(d$sex, labels("m","f"), labels = c("male", "female"))
install.packages("broom")
install.packages("plyr")
install.packages("plyr")
View(d)
summary(d)
data <- na.omit(d$trt)
View(d)
test_set <- subset(d, trt == "NA")
#data <- na.omit(d$trt)
View(test_set)
library(ggplot2)
library(ggplot2)
install.packages("plyr")
library(ggplot2)
library(readr)
library(glmnet)
library(survival)
?pbc
head(pbc)
summary(pbc)
hist(pbc$stage)
table(pbc$stage)
library(ggplot2)
library(readr)
library(glmnet)
library(survival)
?pbc
head(pbc)
summary(pbc)
hist(pbc$stage)
table(pbc$stage)
d <- pbc
d$event <- 0 + (d$status == 2)
summary(d)
table(d$status)
table(d$event)
test_set <- subset(d, trt == "NA")
#data <- na.omit(d$trt)
View(test_set)
test_set <- subset(d, is.na(d$trt))
#data <- na.omit(d$trt)
View(test_set)
test_set <- subset(d, is.na(d$trt))
data <- na.omit(d$trt)
test_set <- subset(d, is.na(d$trt))
data <- subset(d, d$trt != "NA")
test_set <- subset(d, is.na(d$trt))
data <- subset(d, d$trt != "NA")
summary(data)
library(ggplot2)
library(readr)
library(glmnet)
library(survival)
?pbc
head(pbc)
summary(pbc)
hist(pbc$stage)
table(pbc$stage)
data <- pbc
data$event <- 0 + (data$status == 2)
summary(data)
table(data$status)
table(data$event)
test <- subset(data, is.na(d$trt))
test <- subset(data, is.na(data$trt))
train <- subset(data, data$trt != "NA")
summary(data)
sumarry(data)
sumary(train)
summary(train)
plot(train$chol)
plot(train$chol ~ sex)
plot(train$chol ~ train$sex)
plot(fit.chol <- lm(chol ~ sex, data =train))
plot(train$chol ~ train$age)
plot(fit.chol <- (lm(chol ~ sex, data = train)))
plot(fit.chol <- (lm(chol ~ age, data = train)))
plot(train$chol ~ train$age)
fit.chol <- (lm(chol ~ age, data = train))
fit.chol
fit.chol <- (lm(chol ~ age, data = train))
abline(fit.chol)
fit.chol <- (lm(chol ~ age, data = train))
train$chol[is.na(train$chol)] <-
predict(fit.chol, newdata = subset(train, is.na(chol)))
summary(train)
plot(train$chol ~ train$age)
abline(fit.chol)
plot(train$age ~ train$chol)
abline(fit.chol2 <- lm(age ~ chol, data = train)
)
plot(train$copper ~ train$age)
plot(train$copper ~ train$age)
abline(lm(copper ~ age, data = train))
plot(train$trig ~ train$age)
abline(lm(trig ~ age, data = train))
# cholesterol
fit.chol <- (lm(chol ~ age, data = train))
train$chol[is.na(train$chol)] <-
predict(fit.chol, newdata = subset(train, is.na(chol)))
# copper
fit.copper <- (lm(copper ~ age, data = train))
train$copper[is.na(train$copper)] <-
predict(fit.copper, newdata = subset(train, is.na(copper)))
# trig
fit.trig <- (lm(trig ~ age, data = train))
train$trig[is.na(train$trig)] <-
predict(fit.trig, newdata = subset(train, is.na(trig)))
# platelet
fit.platelet <- (lm(platelet ~ age, data = train))
train$platelet[is.na(train$platelet)] <-
predict(fit.platelet, newdata = subset(train, is.na(platelet)))
summary(train)
library(ggplot2)
library(readr)
library(glmnet)
library(survival)
?pbc
head(pbc)
summary(pbc)
hist(pbc$stage)
table(pbc$stage)
data <- pbc
data$event <- 0 + (data$status == 2)
summary(data)
table(data$status)
table(data$event)
test <- subset(data, is.na(data$trt))
train <- subset(data, data$trt != "NA")
summary(data)
# cholesterol
fit.chol <- (lm(chol ~ age, data = train))
train$chol[is.na(train$chol)] <-
predict(fit.chol, newdata = subset(train, is.na(chol)))
# copper
fit.copper <- (lm(copper ~ age, data = train))
train$copper[is.na(train$copper)] <-
predict(fit.copper, newdata = subset(train, is.na(copper)))
# trig
fit.trig <- (lm(trig ~ age, data = train))
train$trig[is.na(train$trig)] <-
predict(fit.trig, newdata = subset(train, is.na(trig)))
# platelet
fit.platelet <- (lm(platelet ~ age, data = train))
train$platelet[is.na(train$platelet)] <-
predict(fit.platelet, newdata = subset(train, is.na(platelet)))
summary(train)
